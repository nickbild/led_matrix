typedef uint32_t PortType;

// Pointers to register addresses.
volatile PortType *addrPortA;
volatile PortType *addrPortB;

// Bit masks for pins.
PortType maskR1;
PortType maskG1;
PortType maskB1;

PortType maskR2;
PortType maskG2;
PortType maskB2;

PortType maskSelectA;
PortType maskSelectB;
PortType maskSelectC;
PortType maskSelectD;

PortType maskOE;
PortType maskLatch;
PortType maskClk;

// Pin numbers.
int pinR1 = 2;
int pinG1 = 3;
int pinB1 = 4;

int pinR2 = 5;
int pinG2 = 7;
int pinB2 = 9;

int pinOE = 10;
int latch = 11;
int pinClk = A4;

int selectA = A0;
int selectB = A1;
int selectC = A2;
int selectD = A3;

// Current state of matrix.
int currentRow = 0;
int frame = 1;  // A "frame" is defined here as one draw of all rows on the matix.
const int totalFrames = 35; // PWM pattern restarts after this many frames are drawn (higher == greater resolution == more colors; too high == flicker).

// Animation control.
int imgNum = 0;
int framesElapsed = 0;
const int changeImageFrames = 6000;  // Set to -1 to display a single image.  Larger number == longer delay between image changes.
const int numImages = 4;  // >1 means animation.

// Data to display.
int brightnessR[numImages][32][32] = {
                              {
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,0,0,0,0,0,0,13,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,13,0,0,0,0,0,0,13,13,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,0,0,0,0,0,0,13,13,13,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,0,0,0,0,0,0,13,13,13,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,19,19,19,19,19,19,0,0,0,0,0,0,19,19,19,19,19,19,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,19,35,35,19,35,35,35,19,19,19,19,19,19,35,35,35,19,35,35,19,13,13,13,13,13,13},
                                {13,13,13,13,13,19,35,35,19,35,35,35,35,19,35,35,19,35,19,35,35,35,35,19,35,35,19,13,13,13,13,13},
                                {13,13,13,13,19,35,35,19,35,35,35,35,19,35,35,35,19,35,35,19,35,35,35,35,19,35,35,19,13,13,13,13},
                                {13,13,13,19,35,35,19,35,35,35,35,19,35,35,35,35,19,35,35,35,19,35,35,35,35,19,35,35,19,13,13,13},
                                {13,13,19,35,35,19,35,35,0,35,19,35,35,35,35,35,19,35,35,35,35,19,35,0,35,35,19,35,35,19,13,13},
                                {13,19,35,35,35,19,35,35,0,0,35,35,35,35,35,35,19,35,35,35,35,35,0,0,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,0,33,0,0,35,35,35,35,19,35,35,35,0,0,33,0,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,0,33,33,0,35,35,35,35,19,35,35,35,0,33,33,0,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,0,0,33,33,0,0,35,35,35,19,35,35,0,0,33,33,0,0,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,35,19,35,35,35,35,35,0,0,35,35,35,35,35,19,35,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,35,19,35,35,35,35,35,0,0,35,35,35,35,35,19,35,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,35,19,35,35,35,35,0,0,0,0,35,35,35,35,19,35,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,19,35,35,35,19,35,35,35,0,0,0,0,0,0,35,35,35,19,35,35,35,35,19,35,35,19,13},
                                {13,19,35,35,35,0,35,35,35,19,35,35,35,0,0,0,0,0,0,35,35,35,19,35,35,35,0,19,35,35,19,13},
                                {13,19,35,35,35,0,0,35,35,19,35,35,35,35,35,35,19,35,35,35,35,35,19,35,35,0,0,19,35,35,19,13},
                                {13,19,35,35,35,0,0,0,35,19,35,35,35,35,35,35,19,35,35,35,35,35,19,35,0,0,0,19,35,35,19,13},
                                {13,19,35,35,35,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,19,35,35,19,13},
                                {13,19,35,35,35,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,19,35,35,19,13},
                                {13,13,19,35,35,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,19,35,19,13,13},
                                {13,13,19,35,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,19,13,13},
                                {13,13,13,19,35,35,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,35,35,19,13,13,13},
                                {13,13,13,13,19,35,35,0,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,0,35,35,19,13,13,13,13},
                                {13,13,13,13,13,19,35,35,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,35,35,19,13,13,13,13,13},
                                {13,13,13,13,13,13,19,35,35,19,35,35,35,19,35,35,19,35,19,35,35,35,19,35,35,19,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,19,19,19,19,35,35,35,19,35,19,19,35,35,35,19,19,19,19,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,19,19,19,19,19,19,19,19,19,19,19,19,13,13,13,13,13,13,13,13,13,13},
                                {13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13,13}
                              },
                              {
                                {0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0},
                                {0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0},
                                {0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0},
                                {0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0},
                                {0,0,34,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,34,0,0},
                                {0,0,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,0,0},
                                {0,0,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,0,0},
                                {0,0,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,0,0},
                                {0,0,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {36,36,36,36,0,0,0,34,34,34,34,0,0,0,0,0,0,0,0,0,0,34,34,34,34,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,34,34,34,34,0,34,0,0,0,0,0,0,0,0,34,0,34,34,34,34,0,0,36,36,36,36},
                                {36,36,36,0,0,0,34,34,34,34,0,0,34,0,0,0,0,0,0,34,0,0,34,34,34,34,0,0,0,36,36,36},
                                {0,36,36,0,0,0,0,34,34,34,0,0,34,34,0,0,0,0,34,34,0,0,34,34,34,0,0,0,0,36,36,0},
                                {36,0,36,0,0,0,0,0,34,34,0,0,34,34,34,0,0,34,34,34,0,0,34,34,0,0,0,0,0,36,0,36},
                                {36,36,0,0,0,0,0,0,0,0,34,0,34,34,34,0,0,34,34,34,0,34,34,0,0,0,0,0,0,0,36,0},
                                {0,0,36,0,0,0,0,0,0,0,0,34,34,0,0,0,0,0,0,34,34,0,0,0,0,0,0,0,0,0,0,36},
                                {36,0,36,0,0,0,0,0,0,0,0,0,0,0,0,33,33,0,0,0,0,0,0,0,0,0,0,0,0,36,0,36},
                                {0,36,36,0,0,0,0,0,0,0,0,0,0,0,33,33,33,33,0,0,0,0,0,0,0,0,0,0,0,36,36,0},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,33,33,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,0,0,0,0,0,0,33,33,33,0,0,0,0,0,0,0,0,33,33,33,0,0,0,0,0,0,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,33,33,36,33,36,33,36,33,36,33,33,33,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,33,33,36,33,36,33,36,33,36,33,33,33,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,36,33,36,33,36,33,36,33,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36}
                              },
                              {
                                {0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,0,34,34,34,34,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,0,0,34,34,34,34,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,34,34,34,34,0,0,0,0,0,0},
                                {0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,34,34,34,34,0,0,0,0,0},
                                {0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,34,0,0,0,0},
                                {0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,34,34,34,0,0,0},
                                {0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,34,34,0,0,0},
                                {0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,34,34,34,0,0},
                                {0,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,0},
                                {0,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,0},
                                {0,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,0,0,0,34,34,34,34,34,34,34,34,34,0},
                                {34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,34,34,34,0,0,0,0,0,0,0,0,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,34,34,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,34,34,0,0,0,0,0,34,34,34,0,0,0,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,0,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,0,0,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,0,0,34,34,34,34,34,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,0,0,34,34,34,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34},
                                {0,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,0},
                                {0,34,34,34,34,34,34,34,34,0,34,0,0,0,34,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,0},
                                {0,34,34,34,34,34,34,34,0,34,34,0,34,0,34,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,0},
                                {0,0,34,34,34,34,34,34,34,34,34,0,34,0,34,34,0,0,34,34,34,34,34,34,34,34,34,34,34,34,0,0},
                                {0,0,34,34,34,34,34,34,34,34,34,34,34,0,34,34,0,0,0,0,34,34,34,34,34,34,34,34,34,34,0,0},
                                {0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,34,34,34,34,34,34,34,34,34,0,0,0},
                                {0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0},
                                {0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0},
                                {0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,34,34,34,34,34,34,34,34,0,0,0,0,0,0,0,0,0,0,0,0}
                              },
                              {
                                {34,34,34,34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,36,36,0,0,0,0,36,36,0,0,0,0,36,36,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,36,36,36,0,35,35,0,36,36,0,35,35,0,36,36,36,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,36,36,36,36,0,35,35,0,36,36,0,35,35,0,36,36,36,36,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,36,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,36,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,0,0,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,36,36,0,0,0,0,0,0,36,36,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,36,36,0,0,0,0,0,0,36,36,34,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,36,34,34,34,34,34,36,36,34,34,34,34,34,36,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,36,34,34,34,34,34,34,36,36,34,34,34,34,34,34,36,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,36,34,34,34,36,36,36,36,36,36,36,36,36,36,34,34,34,36,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,36,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,36,34,34,34,34,34,34},
                                {34,34,34,34,34,36,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,36,34,34,34,34,34},
                                {34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34},
                                {34,34,34,34,36,36,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,36,36,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,34,34,34,34,36,36,34,34,34,34,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,34,34,34,34,36,36,34,34,34,34,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,36,36,36,36,36,36,36,36,36,36,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,34,34,34,34,34,34,34,34,34,34,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,36,36,34,34,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,36,36,36,36,34,34,34,34,34,34,34,34,36,36,36,36,34,34,34,34,34,34,34,34},
                                {34,34,34,34,34,34,34,34,36,36,34,36,34,34,34,34,34,34,34,34,36,34,36,36,34,34,34,34,34,34,34,34}
                              }
                           };

int brightnessG[numImages][32][32] = {
                              {
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,15,15,15,8,15,15,1,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,15,15,15,8,15,15,1,1,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,15,15,15,15,8,15,1,1,1,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,15,15,15,8,15,15,1,1,1,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,9,9,9,9,9,9,15,15,8,15,15,15,9,9,9,9,9,9,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,9,17,17,9,17,17,17,9,9,9,9,9,9,17,17,17,9,17,17,9,1,1,1,1,1,1},
                                {1,1,1,1,1,9,17,17,9,17,17,17,17,9,17,17,9,17,9,17,17,17,17,9,17,17,9,1,1,1,1,1},
                                {1,1,1,1,9,17,17,9,17,17,17,17,9,17,17,17,9,17,17,9,17,17,17,17,9,17,17,9,1,1,1,1},
                                {1,1,1,9,17,17,9,17,17,17,17,9,17,17,17,17,9,17,17,17,9,17,17,17,17,9,17,17,9,1,1,1},
                                {1,1,9,17,17,9,17,17,0,17,9,17,17,17,17,17,9,17,17,17,17,9,17,0,17,17,9,17,17,9,1,1},
                                {1,9,17,17,17,9,17,17,0,0,17,17,17,17,17,17,9,17,17,17,17,17,0,0,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,0,29,0,0,17,17,17,17,9,17,17,17,0,0,29,0,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,0,29,29,0,17,17,17,17,9,17,17,17,0,29,29,0,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,0,0,29,29,0,0,17,17,17,9,17,17,0,0,29,29,0,0,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,17,9,17,17,17,17,17,0,0,17,17,17,17,17,9,17,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,17,9,17,17,17,17,17,0,0,17,17,17,17,17,9,17,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,17,9,17,17,17,17,0,0,0,0,17,17,17,17,9,17,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,9,17,17,17,9,17,17,17,0,0,0,0,0,0,17,17,17,9,17,17,17,17,9,17,17,9,1},
                                {1,9,17,17,17,0,17,17,17,9,17,17,17,0,0,0,0,0,0,17,17,17,9,17,17,17,0,9,17,17,9,1},
                                {1,9,17,17,17,0,0,17,17,9,17,17,17,17,17,17,9,17,17,17,17,17,9,17,17,0,0,9,17,17,9,1},
                                {1,9,17,17,17,0,0,0,17,9,17,17,17,17,17,17,9,17,17,17,17,17,9,17,0,0,0,9,17,17,9,1},
                                {1,9,17,17,17,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,9,17,17,9,1},
                                {1,9,17,17,17,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,9,17,17,9,1},
                                {1,1,9,17,17,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,9,17,9,1,1},
                                {1,1,9,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,9,1,1},
                                {1,1,1,9,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,9,1,1,1},
                                {1,1,1,1,9,17,17,0,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,0,17,17,9,1,1,1,1},
                                {1,1,1,1,1,9,17,17,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,17,17,9,1,1,1,1,1},
                                {1,1,1,1,1,1,9,17,17,9,17,17,17,9,17,17,9,17,9,17,17,17,9,17,17,9,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,9,9,9,9,17,17,17,9,17,9,9,17,17,17,9,9,9,9,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,9,9,9,9,9,9,9,9,9,9,9,9,1,1,1,1,1,1,1,1,1,1},
                                {1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1}
                              },
                              {
                                {0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0},
                                {0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0},
                                {0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0},
                                {0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0},
                                {0,0,33,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,33,0,0},
                                {0,0,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,33,0,0},
                                {0,0,33,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,33,33,0,0},
                                {0,0,33,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,33,33,0,0},
                                {0,0,33,33,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,33,33,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {36,36,36,36,0,0,0,33,33,33,33,0,0,0,0,0,0,0,0,0,0,33,33,33,33,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,33,33,33,33,0,33,0,0,0,0,0,0,0,0,33,0,33,33,33,33,0,0,36,36,36,36},
                                {36,36,36,0,0,0,33,33,33,33,0,0,33,0,0,0,0,0,0,33,0,0,33,33,33,33,0,0,0,36,36,36},
                                {0,36,36,0,0,0,0,33,33,33,0,0,33,33,0,0,0,0,33,33,0,0,33,33,33,0,0,0,0,36,36,0},
                                {36,0,36,0,0,0,0,0,33,33,0,0,33,33,33,0,0,33,33,33,0,0,33,33,0,0,0,0,0,36,0,36},
                                {36,36,0,0,0,0,0,0,0,0,33,0,33,33,33,0,0,33,33,33,0,33,33,0,0,0,0,0,0,0,36,0},
                                {0,0,36,0,0,0,0,0,0,0,0,33,33,0,0,0,0,0,0,33,33,0,0,0,0,0,0,0,0,0,0,36},
                                {36,0,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,0,36},
                                {0,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,0},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36}
                              },
                              {
                                {0,0,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,0,19,19,19,19,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,0,0,19,19,19,19,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,19,19,19,19,0,0,0,0,0,0},
                                {0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,19,19,19,19,0,0,0,0,0},
                                {0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,19,0,0,0,0},
                                {0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,19,19,19,0,0,0},
                                {0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,19,19,0,0,0},
                                {0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,19,19,19,0,0},
                                {0,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,0},
                                {0,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,0},
                                {0,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,0,0,0,19,19,19,19,19,19,19,19,19,0},
                                {19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,19,19,19,0,0,0,0,0,0,0,0,19,19,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,19,19,0,0,0,0,0,0,0,0,0,0,0,0,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,19,19,0,0,0,0,0,19,19,19,0,0,0,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,0,19,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,19,19,19,19,19,19,19,19},
                                {19,19,19,19,19,19,19,0,0,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,19,19,19,19,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,0,0,19,19,19,19,19,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19},
                                {19,19,19,19,19,19,19,19,19,19,0,0,19,19,19,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19},
                                {0,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,0},
                                {0,19,19,19,19,19,19,19,19,0,19,0,0,0,19,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,0},
                                {0,19,19,19,19,19,19,19,0,19,19,0,19,0,19,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,0},
                                {0,0,19,19,19,19,19,19,19,19,19,0,19,0,19,19,0,0,19,19,19,19,19,19,19,19,19,19,19,19,0,0},
                                {0,0,19,19,19,19,19,19,19,19,19,19,19,0,19,19,0,0,0,0,19,19,19,19,19,19,19,19,19,19,0,0},
                                {0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,19,19,19,19,19,19,19,19,19,0,0,0},
                                {0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0},
                                {0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0},
                                {0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,19,19,19,19,19,19,19,19,0,0,0,0,0,0,0,0,0,0,0,0}
                              },
                              {
                                {14,14,14,14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,36,36,0,0,0,0,36,36,0,0,0,0,36,36,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,36,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,36,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,36,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,36,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,0,0,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,36,36,0,0,0,0,0,0,36,36,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,14,36,36,0,0,0,0,0,0,36,36,14,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,36,14,14,14,14,14,36,36,14,14,14,14,14,36,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,36,14,14,14,14,14,14,36,36,14,14,14,14,14,14,36,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,36,14,14,14,36,36,36,36,36,36,36,36,36,36,14,14,14,36,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,36,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,36,14,14,14,14,14,14},
                                {14,14,14,14,14,36,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,36,14,14,14,14,14},
                                {14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14},
                                {14,14,14,14,36,36,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,36,36,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,14,14,14,14,36,36,14,14,14,14,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,14,14,14,14,36,36,14,14,14,14,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,36,36,36,36,36,36,36,36,36,36,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,14,14,14,14,14,14,14,14,14,14,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,36,36,14,14,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,36,36,36,36,14,14,14,14,14,14,14,14,36,36,36,36,14,14,14,14,14,14,14,14},
                                {14,14,14,14,14,14,14,14,36,36,14,36,14,14,14,14,14,14,14,14,36,14,36,36,14,14,14,14,14,14,14,14}
                              }
                           };

int brightnessB[numImages][32][32] = {
                              {
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17},
                                {17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17},
                                {17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17},
                                {17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17},
                                {17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,0,0,0,0,17},
                                {17,0,0,0,0,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,0,0,0,0,17},
                                {17,17,0,0,0,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,0,0,0,17,17},
                                {17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17},
                                {17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17},
                                {17,17,17,17,0,0,0,0,0,0,0,0,36,36,0,0,0,0,36,36,0,0,0,0,0,0,0,0,17,17,17,17},
                                {17,17,17,17,17,0,0,0,0,0,0,36,36,36,36,0,0,36,36,36,36,0,0,0,0,0,0,17,17,17,17,17},
                                {17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,0,0,0,0,0,0,0,0,0,0,0,0,17,17,17,17,17,17,17,17,17,17},
                                {17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17,17}
                              },
                              {
                                {0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0},
                                {0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0},
                                {0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0},
                                {0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0},
                                {0,0,2,0,0,0,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,0,0,0,2,0,0},
                                {0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0},
                                {0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0},
                                {0,0,2,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,2,0,0},
                                {0,0,2,2,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,2,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {36,36,36,36,0,0,0,2,2,2,2,0,0,0,0,0,0,0,0,0,0,2,2,2,2,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,2,2,2,2,0,2,0,0,0,0,0,0,0,0,2,0,2,2,2,2,0,0,36,36,36,36},
                                {36,36,36,0,0,0,2,2,2,2,0,0,2,0,0,0,0,0,0,2,0,0,2,2,2,2,0,0,0,36,36,36},
                                {0,36,36,0,0,0,0,2,2,2,0,0,2,2,0,0,0,0,2,2,0,0,2,2,2,0,0,0,0,36,36,0},
                                {36,0,36,0,0,0,0,0,2,2,0,0,2,2,2,0,0,2,2,2,0,0,2,2,0,0,0,0,0,36,0,36},
                                {36,36,0,0,0,0,0,0,0,0,2,0,2,2,2,0,0,2,2,2,0,2,2,0,0,0,0,0,0,0,36,0},
                                {0,0,36,0,0,0,0,0,0,0,0,2,2,0,0,0,0,0,0,2,2,0,0,0,0,0,0,0,0,0,0,36},
                                {36,0,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,0,36},
                                {0,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,0},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,0,0,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,0,0,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,36,0,36,0,36,0,36,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36},
                                {36,36,36,36,36,36,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,36,36,36,36,36,36}
                              },
                              {
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},
                                {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0}
                              },
                              {
                                {6,6,6,6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,36,36,0,0,0,0,36,36,0,0,0,0,36,36,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,36,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,36,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,36,36,36,36,0,0,0,0,36,36,0,0,0,0,36,36,36,36,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,0,0,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,36,36,0,0,0,0,0,0,36,36,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,6,36,36,0,0,0,0,0,0,36,36,6,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,36,6,6,6,6,6,36,36,6,6,6,6,6,36,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,36,6,6,6,6,6,6,36,36,6,6,6,6,6,6,36,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,36,6,6,6,36,36,36,36,36,36,36,36,36,36,6,6,6,36,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,36,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,36,6,6,6,6,6,6},
                                {6,6,6,6,6,36,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,36,6,6,6,6,6},
                                {6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6},
                                {6,6,6,6,36,36,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,36,36,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,6,6,6,6,36,36,6,6,6,6,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,6,6,6,6,36,36,6,6,6,6,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,36,36,36,36,36,36,36,36,36,36,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,6,6,6,6,6,6,6,6,6,6,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,36,36,6,6,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,36,36,36,36,6,6,6,6,6,6,6,6,36,36,36,36,6,6,6,6,6,6,6,6},
                                {6,6,6,6,6,6,6,6,36,36,6,36,6,6,6,6,6,6,6,6,36,6,36,36,6,6,6,6,6,6,6,6}
                              }
                           };

void setup() {
  // Choose random pins known to correspond to each port register in use to get addresses.
  addrPortA = portOutputRegister(digitalPinToPort(pinR1));
  addrPortB = portOutputRegister(digitalPinToPort(pinG1));
  
  maskR1 = digitalPinToBitMask(pinR1);
  maskG1 = digitalPinToBitMask(pinG1);
  maskB1 = digitalPinToBitMask(pinB1);

  maskR2 = digitalPinToBitMask(pinR2);
  maskG2 = digitalPinToBitMask(pinG2);
  maskB2 = digitalPinToBitMask(pinB2);

  maskSelectA = digitalPinToBitMask(selectA);
  maskSelectB = digitalPinToBitMask(selectB);
  maskSelectC = digitalPinToBitMask(selectC);
  maskSelectD = digitalPinToBitMask(selectD);

  maskOE = digitalPinToBitMask(pinOE);
  maskLatch = digitalPinToBitMask(latch);
  maskClk = digitalPinToBitMask(pinClk);

  pinMode(pinR1, OUTPUT);
  pinMode(pinG1, OUTPUT);
  pinMode(pinB1, OUTPUT);

  pinMode(pinR2, OUTPUT);
  pinMode(pinG2, OUTPUT);
  pinMode(pinB2, OUTPUT);

  pinMode(pinOE, OUTPUT);
  pinMode(latch, OUTPUT);
  pinMode(pinClk, OUTPUT);

  pinMode(selectA, OUTPUT);
  pinMode(selectB, OUTPUT);
  pinMode(selectC, OUTPUT);
  pinMode(selectD, OUTPUT);
}

void loop() {
  // Send on/off bits for each LED (32 columns, R/G/B LED per column), and for top and bottom rows.
  for (int i=0; i<32; i++){
    // Upper rows.
    if (frame <= brightnessR[imgNum][currentRow][i]) {
      *addrPortA |= maskR1;
    } else {
      *addrPortA &= ~maskR1;
    }
    
    if (frame <= brightnessG[imgNum][currentRow][i]) {
      *addrPortB |= maskG1;
    } else {
      *addrPortB &= ~maskG1;
    }
    
    if (frame <= brightnessB[imgNum][currentRow][i]) {
      *addrPortA |= maskB1;
    } else {
      *addrPortA &= ~maskB1;
    }

    // Lower rows.
    if (frame <= brightnessR[imgNum][currentRow+16][i]) {
      *addrPortA |= maskR2;
    } else {
      *addrPortA &= ~maskR2;
    }
    
    if (frame <= brightnessG[imgNum][currentRow+16][i]) {
      *addrPortA |= maskG2;
    } else {
      *addrPortA &= ~maskG2;
    }
    
    if (frame <= brightnessB[imgNum][currentRow+16][i]) {
      *addrPortA |= maskB2;
    } else {
      *addrPortA &= ~maskB2;
    }

    // Hit clock to indicate pixel values are set.
    *addrPortA |= maskClk;
    *addrPortA &= ~maskClk;
  }

  // Turn off LEDs before turning on current row.
  *addrPortA |= maskOE;
  *addrPortA &= ~maskOE;

  // Set current row.
  if (bitRead(currentRow, 0) == 1) {
    *addrPortA |= maskSelectA;
  } else {
    *addrPortA &= ~maskSelectA;
  }

  if (bitRead(currentRow, 1) == 1) {
    *addrPortA |= maskSelectB;
  } else {
    *addrPortA &= ~maskSelectB;
  }

  if (bitRead(currentRow, 2) == 1) {
    *addrPortB |= maskSelectC;
  } else {
    *addrPortB &= ~maskSelectC;
  }

  if (bitRead(currentRow, 3) == 1) {
    *addrPortB |= maskSelectD;
  } else {
    *addrPortB &= ~maskSelectD;
  }

  // All data is in.  Latch current row.
  *addrPortA |= maskLatch;
  *addrPortA &= ~maskLatch;

  // Move to next row.
  currentRow++;
  if (currentRow == 16) {
    currentRow = 0;
    
    frame++;
    if (frame > totalFrames) {
      frame = 1;
    }

    framesElapsed++;
  }

  // Control image change speed.
  if (framesElapsed >= changeImageFrames) {
    framesElapsed = 0;

    imgNum++;
    if (imgNum == numImages) {
      imgNum = 0;
    }
  }
}

